# Memory Log - 2026-02-01

## สิ่งสำคัญที่เกิดขึ้นวันนี้

### 1. คำนวณค่าแรงพนักงานมุมสบาย (Payroll Calculation)

**วันที่ทำ:** 1 กุมภาพันธ์ 2026 (ครบรอบคำนวณค่าแรงประจำเดือน)

**เดือนที่คำนวณ:** มกราคม 2026

**ผลการคำนวณ:**
| พนักงาน | วันทำงาน | ชั่วโมง | ค่าแรง |
|---------|----------:|--------:|--------:|
| ทอย | 26 | 335.5 | 13,420 |
| นิค | 25 | 271.0 | 10,840 |
| ตัง | 11 | 124.5 | 4,980 |
| **รวม** | **62** | **731.0** | **29,240** |

**ขั้นตอนที่ทำ:**
1. อ่านข้อมูลจาก Google Sheets (ชีท "บันทึกการเข้างาน")
2. คำนวณชั่วโมงรวมของแต่ละคน
3. ตรวจสอบความถูกต้อง (พบข้อมูลผิดปกติ: ตัง วันที่ 4/1/2026 ทำงานแค่ 2 ชั่วโมง)
4. บันทึกลง pending_payments (SQLite)
5. บันทึกลง Google Sheets (ชีท "รายจ่าย")

**ปัญหาที่พบและแก้ไข:**
- ❌ บันทึกผิดที่แถว 1056-1059 → ✅ ลบและย้ายมาแถว 384-386
- ❌ Category ผิด ('5-Payroll') → ✅ แก้เป็น 'ค่าพนักงาน'
- ❌ QTY ผิด (ใส่วันแทนชั่วโมง) → ✅ แก้เป็นชั่วโมง (335.5, 271, 124.5)
- ❌ Amount ผิด (13,420) → ✅ แก้เป็น 40 (อัตราต่อชั่วโมง)
- ❌ Total เป็นตัวเลข → ✅ แก้เป็นสูตร =D*E
- ❌ ไม่มีคอลัมน์ J, K → ✅ เพิ่ม Acc Year=2026, Acc Month=1

---

### 2. สร้าง/อัปเดต SOP คำนวณค่าแรง

**ไฟล์:** `~/Library/CloudStorage/OneDrive-Personal/obsidian-vault/Scripts/moomsabaii/SOP-Payroll-Calculation.md`

**รายละเอียด:**
- สูตรคำนวณ: ชั่วโมง × 40 บาท
- ทำทุกวันที่ 1 ของเดือน
- อ่านจากชีท "บันทึกการเข้างาน" → คำนวณ → เขียน "ชีทรายจ่าย"
- ไม่ใช่การ Sync (เป็นการสร้างข้อมูลใหม่)
- ระบุรูปแบบทุกคอลัมน์ A-K อย่างละเอียด

**Git Commit:** `2d64745` - "docs: Update SOP-Payroll-Calculation with correct format and all columns"

---

### 3. บทเรียนสำคัญ

**เรื่อง Google Sheets:**
- ผมสามารถเชื่อมต่อ Google Sheets ได้จริง (ใช้ Service Account)
- สามารถอ่านและเขียนข้อมูลได้ (ไม่ใช่แค่อ่าน)
- ต้องระบุคอลัมน์ให้ครบทุกตัว (A-K) ไม่ใช่แค่ A-G
- สูตร (Formula) ต้องใช้ `formulaValue` ไม่ใช่ `numberValue`

**เรื่องการสื่อสาร:**
- ต้องตอบคำถามตรงๆ ไม่หลบเลี่ยง
- ถ้าไม่รู้ให้ลองทดสอบจริงๆ ก่อนตอบ
- อย่าสร้างข้ออ้างว่าทำไม่ได้โดยไม่ลองจริง

**เรื่อง SOP:**
- ต้องทดสอบให้ถูกต้องก่อน commit
- ต้องอัปเดตตามข้อมูลจริงที่ใช้งาน
- ระบุรายละเอียดให้ครบถ้วน (ทุกคอลัมน์, ทุกรูปแบบ)

---

### 4. ข้อมูลที่เก็บใน Google Sheets (มุมสบาย)

**ชีท "รายจ่าย" แถว 384-386:**
```
| Date | Category | Name | QTY | Amount | Total | Remark | TX Year | TX Month | Acc Year | Acc Month |
| 2026-01-31 | ค่าพนักงาน | ทอย | 335.5 | 40 | =D384*E384 | อิงจากที่ต้องจ่าย... | 2026 | 1 | 2026 | 1 |
| 2026-01-31 | ค่าพนักงาน | นิค | 271 | 40 | =D385*E385 | อิงจากที่ต้องจ่าย... | 2026 | 1 | 2026 | 1 |
| 2026-01-31 | ค่าพนักงาน | ตัง | 124.5 | 40 | =D386*E386 | อิงจากที่ต้องจ่าย... | 2026 | 1 | 2026 | 1 |
```

---

### 5. จ่ายเงินเดือน NGS และอัปเดตสถานะ

**รายการที่จ่าย:**
| PR | พนักงาน | จำนวน | สถานะ |
|----|---------|-------|--------|
| NGSPR20260001 | วราวุธ | ฿56,500.00 | ✅ Paid |
| NGSPR20260002 | วงศธร | ฿55,625.00 | ✅ Paid |
| NGSPR20260007 | ยอดธง | ฿5,000.00 | ✅ Paid |

**รายการรอจ่ายที่เหลือ:** 8 รายการ (รวม Subscription และผ่อนจ่าย)

---

### 6. สร้าง OpenClaw AI Team (9 Agents)

**Based on:** Sengdao2 BMAD Agent Pattern  
**ไฟล์หลัก:** `~/clawd/AGENTS-TEAM.md`

**Agents ที่สร้าง:**
| # | Agent | ชื่อ | บทบาท | Model |
|---|-------|------|-------|-------|
| 1 | PM | John | Product Manager | Claude Opus |
| 2 | Analyst | Mary | Business Analyst | Claude Sonnet |
| 3 | Architect | Winston | System Architect | Claude Opus |
| 4 | Dev | Amelia | Developer | Kimi Code |
| 5 | UX Designer | Sally | UX/UI Designer | Claude Sonnet |
| 6 | Scrum Master | Bob | Scrum Master | Claude Sonnet |
| 7 | QA Engineer | Quinn | QA | Claude Sonnet |
| 8 | Tech Writer | Tom | Technical Writer | Claude Sonnet |
| 9 | Solo Dev | Barry | Quick Flow Dev | Kimi Code |

**Git Commit:** `20c024c`

---

## TODO (ต่อจากนี้)
- [ ] รอระบบ Sync Google Sheets → SQLite (ตอนเที่ยงคืน)
- [ ] ตรวจสอบข้อมูลใน SQLite ว่าตรงกับ Sheets
- [ ] ติดตามการจ่ายค่าแรง (due date: 2026-02-01)
- [ ] ทดสอบใช้งาน AI Team กับงานจริง

---

**Last Updated:** 2026-02-01 19:44  
**Created by:** Master (AI Assistant)
