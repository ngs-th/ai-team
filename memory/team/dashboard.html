<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ¤– AI Team Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);
        }
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 6px;
        }
        .status-active { background: #22c55e; box-shadow: 0 0 8px #22c55e; }
        .status-idle { background: #6b7280; }
        .status-blocked { background: #ef4444; box-shadow: 0 0 8px #ef4444; }
        .status-offline { background: #374151; }
        .progress-bar {
            transition: width 0.5s ease;
        }
        .kanban-column {
            min-height: 200px;
        }
        .task-card {
            transition: all 0.2s ease;
        }
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse-slow {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <!-- Header -->
    <header class="gradient-bg p-6 shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="text-4xl">ðŸ¤–</div>
                <div>
                    <h1 class="text-2xl font-bold">AI Team Dashboard</h1>
                    <p class="text-blue-200 text-sm">Real-time Task & Progress Tracking</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <div class="glass rounded-lg px-4 py-2">
                    <span class="text-sm text-gray-300">Last Updated:</span>
                    <span id="last-updated" class="ml-2 font-mono">--:--:--</span>
                </div>
                <button onclick="refreshData()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition">
                    <i class="fas fa-sync-alt mr-2"></i>Refresh
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-6">
        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
            <!-- Total Tasks -->
            <div class="glass rounded-xl p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-400 text-sm">Total Tasks</p>
                        <p id="stat-total-tasks" class="text-3xl font-bold mt-1">--</p>
                    </div>
                    <div class="bg-blue-500/20 p-3 rounded-lg">
                        <i class="fas fa-tasks text-blue-400 text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 flex gap-2 text-sm">
                    <span id="stat-todo" class="text-gray-400">Todo: --</span>
                    <span class="text-gray-600">|</span>
                    <span id="stat-progress" class="text-yellow-400">Progress: --</span>
                </div>
            </div>

            <!-- Completed -->
            <div class="glass rounded-xl p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-400 text-sm">Completed</p>
                        <p id="stat-completed" class="text-3xl font-bold mt-1 text-green-400">--</p>
                    </div>
                    <div class="bg-green-500/20 p-3 rounded-lg">
                        <i class="fas fa-check-circle text-green-400 text-xl"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div id="stat-completion-rate" class="bg-green-500 h-2 rounded-full progress-bar" style="width: 0%"></div>
                    </div>
                    <p id="stat-completion-text" class="text-xs text-gray-400 mt-1">--% completion rate</p>
                </div>
            </div>

            <!-- Active Agents -->
            <div class="glass rounded-xl p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-400 text-sm">Active Agents</p>
                        <p id="stat-active-agents" class="text-3xl font-bold mt-1 text-blue-400">--</p>
                    </div>
                    <div class="bg-purple-500/20 p-3 rounded-lg">
                        <i class="fas fa-users text-purple-400 text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 flex gap-2 text-sm">
                    <span id="stat-idle" class="text-gray-400">Idle: --</span>
                    <span class="text-gray-600">|</span>
                    <span id="stat-blocked-agents" class="text-red-400">Blocked: --</span>
                </div>
            </div>

            <!-- Due Today -->
            <div class="glass rounded-xl p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-gray-400 text-sm">Due / Overdue</p>
                        <p id="stat-due" class="text-3xl font-bold mt-1 text-orange-400">--</p>
                    </div>
                    <div class="bg-orange-500/20 p-3 rounded-lg">
                        <i class="fas fa-clock text-orange-400 text-xl"></i>
                    </div>
                </div>
                <div class="mt-4 flex gap-2 text-sm">
                    <span id="stat-overdue" class="text-red-400">Overdue: --</span>
                    <span class="text-gray-600">|</span>
                    <span id="stat-due-today" class="text-yellow-400">Today: --</span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Kanban Board -->
            <div class="lg:col-span-2">
                <div class="glass rounded-xl p-6">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-columns text-blue-400"></i>
                        Task Board
                    </h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <!-- Todo -->
                        <div class="kanban-column">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-semibold text-gray-300 flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-gray-500"></span>
                                    Todo
                                </h3>
                                <span id="count-todo" class="bg-gray-700 px-2 py-1 rounded text-xs">0</span>
                            </div>
                            <div id="kanban-todo" class="space-y-2">
                                <!-- Tasks will be inserted here -->
                            </div>
                        </div>

                        <!-- In Progress -->
                        <div class="kanban-column">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-semibold text-blue-300 flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-blue-500 animate-pulse"></span>
                                    In Progress
                                </h3>
                                <span id="count-progress" class="bg-blue-900/50 px-2 py-1 rounded text-xs">0</span>
                            </div>
                            <div id="kanban-progress" class="space-y-2">
                                <!-- Tasks will be inserted here -->
                            </div>
                        </div>

                        <!-- Blocked -->
                        <div class="kanban-column">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-semibold text-red-300 flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-red-500"></span>
                                    Blocked
                                </h3>
                                <span id="count-blocked" class="bg-red-900/50 px-2 py-1 rounded text-xs">0</span>
                            </div>
                            <div id="kanban-blocked" class="space-y-2">
                                <!-- Tasks will be inserted here -->
                            </div>
                        </div>

                        <!-- Done -->
                        <div class="kanban-column">
                            <div class="flex items-center justify-between mb-3">
                                <h3 class="font-semibold text-green-300 flex items-center gap-2">
                                    <span class="w-3 h-3 rounded-full bg-green-500"></span>
                                    Done
                                </h3>
                                <span id="count-done" class="bg-green-900/50 px-2 py-1 rounded text-xs">0</span>
                            </div>
                            <div id="kanban-done" class="space-y-2">
                                <!-- Tasks will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="space-y-6">
                <!-- Agent Status -->
                <div class="glass rounded-xl p-6">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-robot text-purple-400"></i>
                        Agent Status
                    </h2>
                    <div id="agent-list" class="space-y-3">
                        <!-- Agents will be inserted here -->
                    </div>
                </div>

                <!-- Project Progress -->
                <div class="glass rounded-xl p-6">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-project-diagram text-green-400"></i>
                        Projects
                    </h2>
                    <div id="project-list" class="space-y-4">
                        <!-- Projects will be inserted here -->
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="glass rounded-xl p-6">
                    <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <i class="fas fa-bolt text-yellow-400"></i>
                        Quick Actions
                    </h2>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="addTask()" class="bg-blue-600 hover:bg-blue-700 p-3 rounded-lg text-sm transition">
                            <i class="fas fa-plus mr-2"></i>Add Task
                        </button>
                        <button onclick="viewHistory()" class="bg-gray-700 hover:bg-gray-600 p-3 rounded-lg text-sm transition">
                            <i class="fas fa-history mr-2"></i>History
                        </button>
                        <button onclick="exportData()" class="bg-gray-700 hover:bg-gray-600 p-3 rounded-lg text-sm transition">
                            <i class="fas fa-download mr-2"></i>Export
                        </button>
                        <button onclick="settings()" class="bg-gray-700 hover:bg-gray-600 p-3 rounded-lg text-sm transition">
                            <i class="fas fa-cog mr-2"></i>Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="mt-6 glass rounded-xl p-6">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                <i class="fas fa-stream text-cyan-400"></i>
                Recent Activity
            </h2>
            <div id="activity-log" class="space-y-2 max-h-48 overflow-y-auto">
                <!-- Activity will be inserted here -->
            </div>
        </div>
    </main>

    <script>
        // Mock data - Replace with actual API calls to SQLite
        const mockData = {
            stats: {
                total_tasks: 12,
                todo_tasks: 3,
                in_progress_tasks: 5,
                completed_tasks: 3,
                blocked_tasks: 1,
                total_agents: 9,
                active_agents: 3,
                idle_agents: 5,
                blocked_agents: 1,
                avg_progress: 45,
                due_today: 2,
                overdue_tasks: 1
            },
            agents: [
                { id: 'pm', name: 'John', role: 'Product Manager', status: 'idle', task: null, progress: 0 },
                { id: 'analyst', name: 'Mary', role: 'Business Analyst', status: 'active', task: 'T-001', progress: 80 },
                { id: 'architect', name: 'Winston', role: 'System Architect', status: 'active', task: 'T-002', progress: 60 },
                { id: 'dev', name: 'Amelia', role: 'Developer', status: 'active', task: 'T-003', progress: 40 },
                { id: 'ux-designer', name: 'Sally', role: 'UX Designer', status: 'idle', task: null, progress: 0 },
                { id: 'scrum-master', name: 'Bob', role: 'Scrum Master', status: 'idle', task: null, progress: 0 },
                { id: 'qa', name: 'Quinn', role: 'QA Engineer', status: 'blocked', task: 'T-004', progress: 0 },
                { id: 'tech-writer', name: 'Tom', role: 'Tech Writer', status: 'idle', task: null, progress: 0 },
                { id: 'solo-dev', name: 'Barry', role: 'Solo Dev', status: 'idle', task: null, progress: 0 }
            ],
            tasks: [
                { id: 'T-001', title: 'Write PRD for Feature X', status: 'in_progress', priority: 'high', progress: 80, assignee: 'Mary', due: '2026-02-02' },
                { id: 'T-002', title: 'Design database schema', status: 'in_progress', priority: 'high', progress: 60, assignee: 'Winston', due: '2026-02-02' },
                { id: 'T-003', title: 'Implement API endpoints', status: 'in_progress', priority: 'high', progress: 40, assignee: 'Amelia', due: '2026-02-03' },
                { id: 'T-004', title: 'Test payment flow', status: 'blocked', priority: 'high', progress: 0, assignee: 'Quinn', due: '2026-02-01' },
                { id: 'T-005', title: 'Create UI mockups', status: 'todo', priority: 'medium', progress: 0, assignee: null, due: '2026-02-04' },
                { id: 'T-006', title: 'Write documentation', status: 'todo', priority: 'low', progress: 0, assignee: null, due: '2026-02-05' },
                { id: 'T-007', title: 'Setup CI/CD', status: 'done', priority: 'high', progress: 100, assignee: 'Amelia', due: '2026-01-31' }
            ],
            projects: [
                { id: 'P-001', name: 'AI Team System', status: 'active', progress: 65 },
                { id: 'P-002', name: 'Dashboard v2', status: 'planning', progress: 10 }
            ],
            activities: [
                { time: '20:15', agent: 'Winston', action: 'updated', task: 'T-002', details: 'Progress 60%' },
                { time: '20:10', agent: 'Amelia', action: 'started', task: 'T-003', details: 'API implementation' },
                { time: '20:05', agent: 'Quinn', action: 'blocked', task: 'T-004', details: 'Waiting for API' },
                { time: '19:45', agent: 'Mary', action: 'completed', task: 'T-007', details: 'Setup done' }
            ]
        };

        function updateStats() {
            const s = mockData.stats;
            document.getElementById('stat-total-tasks').textContent = s.total_tasks;
            document.getElementById('stat-todo').textContent = `Todo: ${s.todo_tasks}`;
            document.getElementById('stat-progress').textContent = `Progress: ${s.in_progress_tasks}`;
            
            document.getElementById('stat-completed').textContent = s.completed_tasks;
            const completionRate = Math.round((s.completed_tasks / s.total_tasks) * 100) || 0;
            document.getElementById('stat-completion-rate').style.width = `${completionRate}%`;
            document.getElementById('stat-completion-text').textContent = `${completionRate}% completion rate`;
            
            document.getElementById('stat-active-agents').textContent = s.active_agents;
            document.getElementById('stat-idle').textContent = `Idle: ${s.idle_agents}`;
            document.getElementById('stat-blocked-agents').textContent = `Blocked: ${s.blocked_agents}`;
            
            const totalDue = s.due_today + s.overdue_tasks;
            document.getElementById('stat-due').textContent = totalDue;
            document.getElementById('stat-overdue').textContent = `Overdue: ${s.overdue_tasks}`;
            document.getElementById('stat-due-today').textContent = `Today: ${s.due_today}`;
        }

        function renderKanban() {
            const columns = {
                'todo': document.getElementById('kanban-todo'),
                'in_progress': document.getElementById('kanban-progress'),
                'blocked': document.getElementById('kanban-blocked'),
                'done': document.getElementById('kanban-done')
            };

            const counts = {
                'todo': 0,
                'in_progress': 0,
                'blocked': 0,
                'done': 0
            };

            // Clear columns
            Object.values(columns).forEach(col => col.innerHTML = '');

            mockData.tasks.forEach(task => {
                const priorityColors = {
                    'critical': 'border-red-500',
                    'high': 'border-orange-500',
                    'medium': 'border-blue-500',
                    'low': 'border-gray-500'
                };

                const card = document.createElement('div');
                card.className = `task-card bg-gray-800 p-3 rounded-lg border-l-4 ${priorityColors[task.priority] || 'border-gray-500'}`;
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-xs text-gray-400">${task.id}</span>
                        <span class="text-xs px-2 py-1 rounded ${task.priority === 'high' ? 'bg-red-900/50 text-red-300' : 'bg-gray-700 text-gray-300'}">${task.priority}</span>
                    </div>
                    <h4 class="font-medium text-sm mb-2">${task.title}</h4>
                    <div class="flex justify-between items-center text-xs">
                        <span class="text-gray-400">${task.assignee || 'Unassigned'}</span>
                        <span class="text-gray-500">${task.due}</span>
                    </div>
                    ${task.progress > 0 ? `
                    <div class="mt-2">
                        <div class="w-full bg-gray-700 rounded-full h-1.5">
                            <div class="bg-blue-500 h-1.5 rounded-full" style="width: ${task.progress}%"></div>
                        </div>
                        <span class="text-xs text-gray-400">${task.progress}%</span>
                    </div>
                    ` : ''}
                `;

                if (columns[task.status]) {
                    columns[task.status].appendChild(card);
                    counts[task.status]++;
                }
            });

            // Update counts
            document.getElementById('count-todo').textContent = counts.todo;
            document.getElementById('count-progress').textContent = counts.in_progress;
            document.getElementById('count-blocked').textContent = counts.blocked;
            document.getElementById('count-done').textContent = counts.done;
        }

        function renderAgents() {
            const container = document.getElementById('agent-list');
            container.innerHTML = '';

            mockData.agents.forEach(agent => {
                const statusClass = {
                    'active': 'status-active',
                    'idle': 'status-idle',
                    'blocked': 'status-blocked',
                    'offline': 'status-offline'
                };

                const div = document.createElement('div');
                div.className = 'flex items-center justify-between bg-gray-800 p-3 rounded-lg';
                div.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center font-bold">
                            ${agent.name[0]}
                        </div>
                        <div>
                            <p class="font-medium">${agent.name}</p>
                            <p class="text-xs text-gray-400">${agent.role}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <span class="${statusClass[agent.status]}"></span>
                        <span class="text-sm capitalize">${agent.status}</span>
                        ${agent.task ? `<p class="text-xs text-gray-400">${agent.task}</p>` : ''}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function renderProjects() {
            const container = document.getElementById('project-list');
            container.innerHTML = '';

            mockData.projects.forEach(project => {
                const div = document.createElement('div');
                div.className = 'bg-gray-800 p-4 rounded-lg';
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <h4 class="font-medium">${project.name}</h4>
                        <span class="text-xs px-2 py-1 rounded ${project.status === 'active' ? 'bg-green-900/50 text-green-300' : 'bg-gray-700 text-gray-300'}">${project.status}</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-gradient-to-r from-blue-500 to-green-500 h-2 rounded-full progress-bar" style="width: ${project.progress}%"></div>
                    </div>
                    <p class="text-xs text-gray-400 mt-1">${project.progress}% complete</p>
                `;
                container.appendChild(div);
            });
        }

        function renderActivity() {
            const container = document.getElementById('activity-log');
            container.innerHTML = '';

            mockData.activities.forEach(act => {
                const div = document.createElement('div');
                div.className = 'flex items-center gap-3 text-sm p-2 hover:bg-gray-800 rounded';
                
                const actionIcons = {
                    'started': '<i class="fas fa-play text-green-400"></i>',
                    'completed': '<i class="fas fa-check text-green-400"></i>',
                    'updated': '<i class="fas fa-edit text-blue-400"></i>',
                    'blocked': '<i class="fas fa-exclamation-triangle text-red-400"></i>'
                };

                div.innerHTML = `
                    <span class="text-gray-500 font-mono text-xs">${act.time}</span>
                    <span class="w-6 text-center">${actionIcons[act.action] || '<i class="fas fa-info text-gray-400"></i>'}</span>
                    <span class="text-gray-300">${act.agent}</span>
                    <span class="text-gray-500">${act.action}</span>
                    <span class="text-blue-400">${act.task}</span>
                    <span class="text-gray-500 text-xs">${act.details}</span>
                `;
                container.appendChild(div);
            });
        }

        function refreshData() {
            // Update last updated time
            document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();
            
            // Refresh all components
            updateStats();
            renderKanban();
            renderAgents();
            renderProjects();
            renderActivity();
        }

        function addTask() {
            alert('Add Task - To be implemented');
        }

        function viewHistory() {
            alert('View History - To be implemented');
        }

        function exportData() {
            alert('Export Data - To be implemented');
        }

        function settings() {
            alert('Settings - To be implemented');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            refreshData();
            
            // Auto refresh every 30 seconds
            setInterval(refreshData, 30000);
        });
    </script>
</body>
</html>
